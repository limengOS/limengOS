<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>L4Re – L4 Runtime Environment: Interface Definition Language</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="l4re.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">L4Re – L4 Runtime Environment
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('l4_cxx_ipc_iface.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Interface Definition Language </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>An interface definition in <a class="el" href="namespaceL4Re.html" title="L4Re C++ Interfaces.">L4Re</a> is normally declared as a class derived from <a class="el" href="classL4_1_1Kobject__t.html" title="Helper class to create an L4Re interface class that is derived from a single base class.">L4::Kobject_t</a>.</p>
<p>For example, the simple calculator example declares its interface like that:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>Calc : <a class="code" href="classL4_1_1Kobject__t.html">L4::Kobject_t</a>&lt;Calc, L4::Kobject&gt;</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="ipc__iface.html#a5772eb61b611f8f17bbc89e02e534ca1">L4_INLINE_RPC</a>(<span class="keywordtype">int</span>, sub, (<a class="code" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> a, <a class="code" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> b, <a class="code" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> *res));</div>
<div class="line">  <a class="code" href="ipc__iface.html#a5772eb61b611f8f17bbc89e02e534ca1">L4_INLINE_RPC</a>(<span class="keywordtype">int</span>, neg, (<a class="code" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> a, <a class="code" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> *res));</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">typedef</span> <a class="code" href="structL4_1_1Typeid_1_1Rpcs.html">L4::Typeid::Rpcs&lt;sub_t, neg_t&gt;</a> Rpcs;</div>
<div class="line">};</div>
<div class="ttc" id="aclassL4_1_1Kobject__t_html"><div class="ttname"><a href="classL4_1_1Kobject__t.html">L4::Kobject_t</a></div><div class="ttdoc">Helper class to create an L4Re interface class that is derived from a single base class.</div><div class="ttdef"><b>Definition:</b> <a href="____typeinfo_8h_source.html#l00759">__typeinfo.h:760</a></div></div>
<div class="ttc" id="agroup__l4__basic__types_html_gac1d09f3e382e711b776931f10e6e1e5a"><div class="ttname"><a href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a></div><div class="ttdeci">unsigned int l4_uint32_t</div><div class="ttdoc">Unsigned 32bit value.</div><div class="ttdef"><b>Definition:</b> <a href="l4_2sys_2l4int_8h_source.html#l00040">l4int.h:40</a></div></div>
<div class="ttc" id="aipc__iface_html_a5772eb61b611f8f17bbc89e02e534ca1"><div class="ttname"><a href="ipc__iface.html#a5772eb61b611f8f17bbc89e02e534ca1">L4_INLINE_RPC</a></div><div class="ttdeci">#define L4_INLINE_RPC(res, name, args, attr...)</div><div class="ttdoc">Define an inline RPC call (type and callable).</div><div class="ttdef"><b>Definition:</b> <a href="ipc__iface_source.html#l00469">ipc_iface:469</a></div></div>
<div class="ttc" id="astructL4_1_1Typeid_1_1Rpcs_html"><div class="ttname"><a href="structL4_1_1Typeid_1_1Rpcs.html">L4::Typeid::Rpcs</a></div><div class="ttdoc">Standard list of RPCs of an interface.</div><div class="ttdef"><b>Definition:</b> <a href="____typeinfo_8h_source.html#l00438">__typeinfo.h:438</a></div></div>
</div><!-- fragment --><p>The signature of each function is first declared using one of the RPC macros (see below) and then all the functions need to be listed in the Rpcs type.</p>
<p>Clients invoke these functions with the name given to the RPC macros, <code>sub</code> and <code>neg</code> above. Servers implement them by defining functions with an <code>op_</code> prepended, <code>op_sub</code> and <code>op_neg</code>. The types of the parameters in the macro definition, on the server side, and on the client side are not the same. The following section describes how they are related to each other.</p>
<h1><a class="anchor" id="l4_cxx_ipc_iface_types"></a>
Parameter types for RPC</h1>
<p>Generally all value parameters, const reference parameters, and const pointer parameters to an RPC interface are considered as input parameters for the RPC and are transmitted from the client to the server. </p><dl class="section note"><dt>Note</dt><dd>This means that <code>char const *</code> is treated as an input <code>char</code> and not as a zero terminated string value, for strings see L4::Ipc::String&lt;&gt;.</dd></dl>
<p>Parameters that are non-const references or non-const pointers are treated as output parameters going from the server to the client.</p>
<p>There are special data types that appear on only one side (client or server) when used, see the following table for details.</p>
<div class="fragment"><div class="line"><a class="code" href="ipc__iface.html#a5e5588cacb2659f18f48ae49c2beb800">L4_RPC</a>(<span class="keywordtype">long</span>, test, (<span class="keywordtype">int</span> arg1, <span class="keywordtype">char</span> <span class="keyword">const</span> *arg2, <span class="keywordtype">unsigned</span> *ret1));</div>
<div class="ttc" id="aipc__iface_html_a5e5588cacb2659f18f48ae49c2beb800"><div class="ttname"><a href="ipc__iface.html#a5e5588cacb2659f18f48ae49c2beb800">L4_RPC</a></div><div class="ttdeci">#define L4_RPC(res, name, args, attr...)</div><div class="ttdoc">Define an RPC call (type and callable).</div><div class="ttdef"><b>Definition:</b> <a href="ipc__iface_source.html#l00528">ipc_iface:528</a></div></div>
</div><!-- fragment --><p>The example shows the declaration of a method called <code>test</code> with <code>long</code> as return type, <code>arg1</code> is an <code>int</code> input, <code>arg2</code> a <code>char</code> input, and <code>ret1</code> an <code>unsigned</code> output parameter.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Type   </th><th class="markdownTableHeadLeft">Direction   </th><th class="markdownTableHeadLeft">Client-Type   </th><th class="markdownTableHeadLeft">Server-Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>T</code>   </td><td class="markdownTableBodyLeft">Input   </td><td class="markdownTableBodyLeft"><code>T</code>   </td><td class="markdownTableBodyLeft"><code>T</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>T const &amp;</code>   </td><td class="markdownTableBodyLeft">Input   </td><td class="markdownTableBodyLeft"><code>T const &amp;</code>   </td><td class="markdownTableBodyLeft"><code>T const &amp;</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>T const *</code>   </td><td class="markdownTableBodyLeft">Input   </td><td class="markdownTableBodyLeft"><code>T const *</code>   </td><td class="markdownTableBodyLeft"><code>T const &amp;</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>T &amp;</code>   </td><td class="markdownTableBodyLeft">Output   </td><td class="markdownTableBodyLeft"><code>T &amp;</code>   </td><td class="markdownTableBodyLeft"><code>T &amp;</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>T *</code>   </td><td class="markdownTableBodyLeft">Output   </td><td class="markdownTableBodyLeft"><code>T *</code>   </td><td class="markdownTableBodyLeft"><code>T &amp;</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1In__out.html" title="Mark an argument as in-out argument.">L4::Ipc::In_out</a>&lt;T &amp;&gt;</code>   </td><td class="markdownTableBodyLeft">In/Out   </td><td class="markdownTableBodyLeft"><code>T &amp;</code>   </td><td class="markdownTableBodyLeft"><code>T &amp;</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1In__out.html" title="Mark an argument as in-out argument.">L4::Ipc::In_out</a>&lt;T *&gt;</code>   </td><td class="markdownTableBodyLeft">In/Out   </td><td class="markdownTableBodyLeft"><code>T *</code>   </td><td class="markdownTableBodyLeft"><code>T &amp;</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code><a class="el" href="classL4_1_1Ipc_1_1Cap.html" title="Capability type for RPC interfaces (see L4::Cap&lt;T&gt;).">L4::Ipc::Cap</a>&lt;T&gt;</code>   </td><td class="markdownTableBodyLeft">Input   </td><td class="markdownTableBodyLeft"><code><a class="el" href="classL4_1_1Ipc_1_1Cap.html" title="Capability type for RPC interfaces (see L4::Cap&lt;T&gt;).">L4::Ipc::Cap</a>&lt;T&gt;</code>   </td><td class="markdownTableBodyLeft"><code><a class="el" href="namespaceL4_1_1Ipc.html#a56d906845bd62ce43e53bd7f52b64569" title="Send flex-page.">L4::Ipc::Snd_fpage</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Out.html" title="Mark an argument as a output value in an RPC signature.">L4::Ipc::Out</a>&lt;<a class="el" href="classL4_1_1Cap.html" title="C++ interface for capabilities.">L4::Cap</a>&lt;T&gt; &gt;</code>   </td><td class="markdownTableBodyLeft">Output   </td><td class="markdownTableBodyLeft"><code><a class="el" href="classL4_1_1Cap.html" title="C++ interface for capabilities.">L4::Cap</a>&lt;T&gt;</code>   </td><td class="markdownTableBodyLeft"><code><a class="el" href="classL4_1_1Ipc_1_1Cap.html" title="Capability type for RPC interfaces (see L4::Cap&lt;T&gt;).">L4::Ipc::Cap</a>&lt;T&gt; &amp;</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code><a class="el" href="namespaceL4_1_1Ipc.html#a6452f912e9d39ed9e47bb7709280e528" title="Rcv flex-page.">L4::Ipc::Rcv_fpage</a></code>   </td><td class="markdownTableBodyLeft">Input   </td><td class="markdownTableBodyLeft"><code><a class="el" href="namespaceL4_1_1Ipc.html#a6452f912e9d39ed9e47bb7709280e528" title="Rcv flex-page.">L4::Ipc::Rcv_fpage</a></code>   </td><td class="markdownTableBodyLeft"><code>void</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code><a class="el" href="classL4_1_1Ipc_1_1Small__buf.html" title="A receive item for receiving a single capability.">L4::Ipc::Small_buf</a></code>   </td><td class="markdownTableBodyLeft">Input   </td><td class="markdownTableBodyLeft"><code><a class="el" href="classL4_1_1Ipc_1_1Small__buf.html" title="A receive item for receiving a single capability.">L4::Ipc::Small_buf</a></code>   </td><td class="markdownTableBodyLeft"><code>void</code>   </td></tr>
</table>
<p>Array types can be used to transmit arrays of variable length. They can either be stored in a client-provided buffer (<a class="el" href="structL4_1_1Ipc_1_1Array.html" title="Array data type for dynamically sized arrays in RPCs.">L4::Ipc::Array</a>), copied into a server-provided buffer (<a class="el" href="structL4_1_1Ipc_1_1Array__in__buf.html" title="Server-side copy in buffer for Array.">L4::Ipc::Array_in_buf</a>) or directly read and written into the UTCB (<a class="el" href="structL4_1_1Ipc_1_1Array__ref.html" title="Array reference data type for arrays located in the message.">L4::Ipc::Array_ref</a>). For latter type, the start position of an array type needs to be known in advance. That implies that only one such array can be transmitted per direction and it must be the last part in the message.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Type   </th><th class="markdownTableHeadLeft">Direction   </th><th class="markdownTableHeadLeft">Client-Type   </th><th class="markdownTableHeadLeft">Server-Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Array.html" title="Array data type for dynamically sized arrays in RPCs.">L4::Ipc::Array</a>&lt;const T&gt;</code>   </td><td class="markdownTableBodyLeft">Input   </td><td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Array.html" title="Array data type for dynamically sized arrays in RPCs.">L4::Ipc::Array</a>&lt;const T&gt;</code>   </td><td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Array__ref.html" title="Array reference data type for arrays located in the message.">L4::Ipc::Array_ref</a>&lt;const T&gt;</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Array.html" title="Array data type for dynamically sized arrays in RPCs.">L4::Ipc::Array</a>&lt;const T&gt;</code>   </td><td class="markdownTableBodyLeft">Input   </td><td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Array.html" title="Array data type for dynamically sized arrays in RPCs.">L4::Ipc::Array</a>&lt;const T&gt;</code>   </td><td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Array__in__buf.html" title="Server-side copy in buffer for Array.">L4::Ipc::Array_in_buf</a>&lt;T&gt; const &amp;</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Array.html" title="Array data type for dynamically sized arrays in RPCs.">L4::Ipc::Array</a>&lt;T&gt; &amp;</code>   </td><td class="markdownTableBodyLeft">Output   </td><td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Array.html" title="Array data type for dynamically sized arrays in RPCs.">L4::Ipc::Array</a>&lt;T&gt; &amp;</code>   </td><td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Array__ref.html" title="Array reference data type for arrays located in the message.">L4::Ipc::Array_ref</a>&lt;T&gt; &amp;</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Array__ref.html" title="Array reference data type for arrays located in the message.">L4::Ipc::Array_ref</a>&lt;T&gt; &amp;</code>   </td><td class="markdownTableBodyLeft">Output   </td><td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Array__ref.html" title="Array reference data type for arrays located in the message.">L4::Ipc::Array_ref</a>&lt;T&gt; &amp;</code>   </td><td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Array__ref.html" title="Array reference data type for arrays located in the message.">L4::Ipc::Array_ref</a>&lt;T&gt; &amp;</code>   </td></tr>
</table>
<p>Finally, there are some optional types where the sender can choose if the parameter should be included in the message. These types are for the implementation of some legacy message formats and should generally not be needed for the definition of ordinary interfaces.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Type   </th><th class="markdownTableHeadLeft">Direction   </th><th class="markdownTableHeadLeft">Client-Type   </th><th class="markdownTableHeadLeft">Server-Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Opt.html" title="Attribute for defining an optional RPC argument.">L4::Ipc::Opt</a>&lt;T&gt;</code>   </td><td class="markdownTableBodyLeft">Input   </td><td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Opt.html" title="Attribute for defining an optional RPC argument.">L4::Ipc::Opt</a>&lt;T&gt;</code>   </td><td class="markdownTableBodyLeft"><code>T</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Opt.html" title="Attribute for defining an optional RPC argument.">L4::Ipc::Opt</a>&lt;const T*&gt;</code>   </td><td class="markdownTableBodyLeft">Input   </td><td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Opt.html" title="Attribute for defining an optional RPC argument.">L4::Ipc::Opt</a>&lt;const T*&gt;</code>   </td><td class="markdownTableBodyLeft"><code>T</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Opt.html" title="Attribute for defining an optional RPC argument.">L4::Ipc::Opt</a>&lt;T &amp;&gt;</code>   </td><td class="markdownTableBodyLeft">Output   </td><td class="markdownTableBodyLeft"><code>T &amp;</code>   </td><td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Opt.html" title="Attribute for defining an optional RPC argument.">L4::Ipc::Opt</a>&lt;T&gt; &amp;</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Opt.html" title="Attribute for defining an optional RPC argument.">L4::Ipc::Opt</a>&lt;T *&gt;</code>   </td><td class="markdownTableBodyLeft">Output   </td><td class="markdownTableBodyLeft"><code>T *</code>   </td><td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Opt.html" title="Attribute for defining an optional RPC argument.">L4::Ipc::Opt</a>&lt;T&gt; &amp;</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Opt.html" title="Attribute for defining an optional RPC argument.">L4::Ipc::Opt</a>&lt;Array_ref&lt;T&gt; &amp;&gt;</code>   </td><td class="markdownTableBodyLeft">Output   </td><td class="markdownTableBodyLeft"><code>Array_ref&lt;T&gt; &amp;</code>   </td><td class="markdownTableBodyLeft"><code><a class="el" href="structL4_1_1Ipc_1_1Opt.html" title="Attribute for defining an optional RPC argument.">L4::Ipc::Opt</a>&lt;Array_ref&lt;T&gt;&gt; &amp;</code>   </td></tr>
</table>
<h1><a class="anchor" id="l4_cxx_ipc_iface_return_types"></a>
RPC Return Types</h1>
<p>On the server side, the return type of an RPC handling function is always <code>long</code>. The return value is transmitted via the label field in <a class="el" href="structl4__msgtag__t.html" title="Message tag data structure.">l4_msgtag_t</a> and is therefore restricted to its length. Per convention, a negative return value is interpreted as an error condition. If the return value is negative, output parameters are not transmitted back to the client.</p>
<dl class="section attention"><dt>Attention</dt><dd>The client must never rely on the content of output parameters when the return value is negative.</dd></dl>
<p>On the client-side, the return value of the RPC is set as defined in the RPC macro. If <code><a class="el" href="structl4__msgtag__t.html" title="Message tag data structure.">l4_msgtag_t</a></code> is given, then the client has access to the full message tag, otherwise the return type should be <code>long</code>. Note that the client might not only receive the server return value in response but also an IPC error code.</p>
<h1><a class="anchor" id="l4_cxx_ipc_iface_members"></a>
RPC Method Declaration</h1>
<p>RPC member functions can be declared using one of the following C++ macros.</p>
<p>For inline RPC stubs, where the RPC stub code itself is <code>inline</code>:</p><ul>
<li><div class="fragment"><div class="line"><a class="code" href="ipc__iface.html#a5772eb61b611f8f17bbc89e02e534ca1">L4_INLINE_RPC</a>(res, name, (args...), flags)</div>
</div><!-- fragment --> Define an inline RPC call (type and callable).</li>
<li><div class="fragment"><div class="line"><a class="code" href="ipc__iface.html#afd77fe126e97c4d046e3842d948ec91d">L4_INLINE_RPC_OP</a>(op, res, name, (args...), flags)</div>
<div class="ttc" id="aipc__iface_html_afd77fe126e97c4d046e3842d948ec91d"><div class="ttname"><a href="ipc__iface.html#afd77fe126e97c4d046e3842d948ec91d">L4_INLINE_RPC_OP</a></div><div class="ttdeci">#define L4_INLINE_RPC_OP(op, res, name, args, attr...)</div><div class="ttdoc">Define an inline RPC call with specific opcode (type and callable).</div><div class="ttdef"><b>Definition:</b> <a href="ipc__iface_source.html#l00484">ipc_iface:484</a></div></div>
</div><!-- fragment --> Define an inline RPC call with specific opcode (type and callable).</li>
<li><div class="fragment"><div class="line"><a class="code" href="ipc__iface.html#a7bc5bdbe269ef0598c166ed1dd923549">L4_INLINE_RPC_NF</a>(res, name, (args...), flags)</div>
<div class="ttc" id="aipc__iface_html_a7bc5bdbe269ef0598c166ed1dd923549"><div class="ttname"><a href="ipc__iface.html#a7bc5bdbe269ef0598c166ed1dd923549">L4_INLINE_RPC_NF</a></div><div class="ttdeci">#define L4_INLINE_RPC_NF(res, name, args...)</div><div class="ttdoc">Define an inline RPC call type (the type only, no callable).</div><div class="ttdef"><b>Definition:</b> <a href="ipc__iface_source.html#l00440">ipc_iface:440</a></div></div>
</div><!-- fragment --> Define an inline RPC call type (the type only, no callable).</li>
<li><div class="fragment"><div class="line"><a class="code" href="ipc__iface.html#a9c231340e92b2868f1b85b302fb2b159">L4_INLINE_RPC_NF_OP</a>(opcode, Ret_type, func_name, (args...), flags)</div>
<div class="ttc" id="aipc__iface_html_a9c231340e92b2868f1b85b302fb2b159"><div class="ttname"><a href="ipc__iface.html#a9c231340e92b2868f1b85b302fb2b159">L4_INLINE_RPC_NF_OP</a></div><div class="ttdeci">#define L4_INLINE_RPC_NF_OP(op, res, name, args...)</div><div class="ttdoc">Define an inline RPC call type with specific opcode (the type only, no callable).</div><div class="ttdef"><b>Definition:</b> <a href="ipc__iface_source.html#l00453">ipc_iface:453</a></div></div>
</div><!-- fragment --> Define an inline RPC call type with specific opcode (the type only, no callable).</li>
</ul>
<p>For external RPC stubs, where the RPC stub code must be defined in a separate compile unit (usually a <code>.cc</code> file):</p><ul>
<li><div class="fragment"><div class="line"><a class="code" href="ipc__iface.html#a5e5588cacb2659f18f48ae49c2beb800">L4_RPC</a>(Ret_type, func_name, (args...), flags)</div>
</div><!-- fragment --> Define an RPC call (type and callable).<ul>
<li><div class="fragment"><div class="line"><a class="code" href="ipc__iface.html#a0264d26151de8ed0903379a035c223bb">L4_RPC_OP</a>(opcode, Ret_type, func_name, (args...), flags)</div>
<div class="ttc" id="aipc__iface_html_a0264d26151de8ed0903379a035c223bb"><div class="ttname"><a href="ipc__iface.html#a0264d26151de8ed0903379a035c223bb">L4_RPC_OP</a></div><div class="ttdeci">#define L4_RPC_OP(op, res, name, args, attr...)</div><div class="ttdoc">Define an RPC call with specific opcode (type and callable).</div><div class="ttdef"><b>Definition:</b> <a href="ipc__iface_source.html#l00543">ipc_iface:543</a></div></div>
</div><!-- fragment --> Define an RPC call with specific opcode (type and callable).</li>
</ul>
</li>
<li><div class="fragment"><div class="line"><a class="code" href="ipc__iface.html#ada755c1db9f58471fc483ccfbed1f518">L4_RPC_NF</a>(Ret_type, func_name, (args...), flags)</div>
<div class="ttc" id="aipc__iface_html_ada755c1db9f58471fc483ccfbed1f518"><div class="ttname"><a href="ipc__iface.html#ada755c1db9f58471fc483ccfbed1f518">L4_RPC_NF</a></div><div class="ttdeci">#define L4_RPC_NF(res, name, args...)</div><div class="ttdoc">Define an RPC call type (the type only, no callable).</div><div class="ttdef"><b>Definition:</b> <a href="ipc__iface_source.html#l00497">ipc_iface:497</a></div></div>
</div><!-- fragment --> Define an RPC call type (the type only, no callable).</li>
<li><div class="fragment"><div class="line"><a class="code" href="ipc__iface.html#aaf74b7e287f17aa9629ac694bbe6bc39">L4_RPC_NF_OP</a>(opcode, Ret_type, func_name, (args...), flags)</div>
<div class="ttc" id="aipc__iface_html_aaf74b7e287f17aa9629ac694bbe6bc39"><div class="ttname"><a href="ipc__iface.html#aaf74b7e287f17aa9629ac694bbe6bc39">L4_RPC_NF_OP</a></div><div class="ttdeci">#define L4_RPC_NF_OP(op, res, name, args...)</div><div class="ttdoc">Define an RPC call type with specific opcode (the type only, no callable).</div><div class="ttdef"><b>Definition:</b> <a href="ipc__iface_source.html#l00512">ipc_iface:512</a></div></div>
</div><!-- fragment --> Define an RPC call type with specific opcode (the type only, no callable).</li>
</ul>
<p>To generate the implementation of an external RPC stub:</p><ul>
<li><div class="fragment"><div class="line"><a class="code" href="ipc__client.html#aebfe730f4231dc11a7a1998acc6e4ab6">L4_RPC_DEF</a>(class_name::func_name)</div>
<div class="ttc" id="aipc__client_html_aebfe730f4231dc11a7a1998acc6e4ab6"><div class="ttname"><a href="ipc__client.html#aebfe730f4231dc11a7a1998acc6e4ab6">L4_RPC_DEF</a></div><div class="ttdeci">#define L4_RPC_DEF(name)</div><div class="ttdoc">Generate the definition of an RPC stub.</div><div class="ttdef"><b>Definition:</b> <a href="ipc__client_source.html#l00043">ipc_client:43</a></div></div>
</div><!-- fragment --> Generate the definition of an RPC stub.</li>
</ul>
<p>The <code>NF</code> versions of the macro generally do not generate a callable member function named <code>&lt;name&gt;</code> but do only generate the type <code>&lt;name&gt;_t</code>. This data type can be used to call the RPC stub explicitly using <code>&lt;name&gt;_t::call(<a class="el" href="classL4_1_1Cap.html" title="C++ interface for capabilities.">L4::Cap</a>&lt;Iface_class&gt; cap, args...)</code>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="l4re_concepts.html">Programming for L4Re</a></li>
    <li class="footer">Generated on Mon Apr 18 2022 20:48:54 for L4Re – L4 Runtime Environment by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
